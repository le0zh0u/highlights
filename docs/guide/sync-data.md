

# 数据同步

因为所有的笔记都是在MacOS端导入的，并在上面进行整理等动作，且iOS端的定位主要偏向阅读和思考，所以现阶段的操作路径是
- 在MacOS端完成数据的导入后，进入偏好设置，开始通过iCloud备份数据
- 然后通过iCloud同步到云端
- 在iOS端通过导入云端的备份文件导入数据

## MacOS如何备份到iCloud
打开「偏好设置」，进入「通用」选项页面。

![](/images/app/20220812212712.png)

**打开启用iCloud**开关后，选择**备份数据到iCloud**按钮。

点击「备份数据到iCloud」这个按钮，会自动将数据库数据转换成json文件，保存到文件夹中。

## MacOS如何恢复备份
打开「偏好设置」，进入「通用」选项页面。

确认**打开启用iCloud**开关后，选择**从iCloud导入备份数据**按钮。
只能导入最新的备份数据，备份来源和时间后，点击确认就会开始导入。

需要注意的是：如果当前数据库有数据存在，则会导入失败，需要清除所有数据后，进行导入备份的操作。

## iOS如何导入备份
打开应用后进入「设置」选项页，开启「启用iCloud」。

![](/images/app/20220812212943.png)

会出现「从iCloud导入备份数据」的按钮，点击按钮后，确认数据来源和时间，点击确认即可开始导入数据。

**常见问题**

- 如果第一次开启后，需要下载数据，需要等待一会。
- 导入的数据版本不对（来源和时间不对），需要关闭应用重新打开，等待再次触发数据同步
- 如果点击确认后显示「正在下载文件」，则稍等一会后重试即可。因为iCloud同步数据是先有`.icloud`的文件占位，手动触发后即可进入下载状态。

